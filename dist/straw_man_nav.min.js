/*!
 *   straw_man_nav.js
 * See {@link https://github.com/dettalant/straw_man_nav}
 *
 * @author dettalant
 * @version v0.2.2
 * @license MIT License
 */
!function(){"use strict";function e(e){this.message=e,this.name="NavManagerError"}var l="globalNavContainer",a="globalNav",i="global_nav_clip",r="globalNavOpener",t="is_opened",n="is_visible",s=null===window.ontouchend?"touchend":"click";e.prototype.toString=function(){return this.name+": "+this.message};function c(){var e=document.getElementById(l);if(null===e)throw new p("#"+l+"の取得ができませんでした");var t=document.getElementById(a);if(null===t)throw new p("#"+a+"の取得ができませんでした");var n=t.getElementsByClassName(i);if(null===n)throw new p("."+i+"の取得ができませんでした");var o=document.getElementById(r);if(null===o)throw new p("#"+r+"の取得ができませんでした");this.globalNav=t,this.globalNavContainer=e,this.globalNavClips=n,this.globalNavOpener=o,this.modalShadow=this.createModalShadowElement(),document.body.appendChild(this.modalShadow)}var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(e);c.prototype.openSlideNavMenu=function(){this.globalNavContainer.classList.add(t),this.modalShadow.classList.add(n)},c.prototype.closeSlideNavMenu=function(){-1!==this.globalNavContainer.className.indexOf(t)&&this.globalNavContainer.classList.remove(t),this.modalShadow.classList.remove(n)},c.prototype.openDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=e.scrollHeight+"px"),e.classList.add(t)},c.prototype.closeDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=""),e.classList.remove(t)},c.prototype.closeDropDownClipAll=function(){for(var e=this.globalNavClips.length,t=0;t<e;t++){var n=this.globalNavClips[t];this.closeDropDownClip(n)}},c.prototype.clickEventHandler=function(e){-1===e.className.indexOf(t)?(this.closeDropDownClipAll(),this.openDropDownClip(e)):this.closeDropDownClip(e)},c.prototype.isOtherElementsClick=function(e,t){if(null===e.target)return!0;if(!(e.target instanceof Element))return!0;if(null===e.target.parentElement)return!0;var n,o=e.target.tagName.toUpperCase();if(null===(n="USE"===o?e.target.parentElement.parentElement:"SVG"===o?e.target.parentElement:e.target))return!0;for(var l=n.className,a=t.length,i=0;i<a;i++)if(-1!==l.indexOf(t[i]))return!1;return!0},c.prototype.createModalShadowElement=function(){var e=document.createElement("div");return e.classList.add("modal_shadow"),e},document.addEventListener("DOMContentLoaded",function(){var n=new c;document.addEventListener(s,function(e){var t=[i,"global_nav_clip_wrapper"];n.isOtherElementsClick(e,t)&&n.closeDropDownClipAll()},!1);for(var e=n.globalNavClips.length,t=function(e){var t=n.globalNavClips[e];t.addEventListener(s,function(){n.clickEventHandler(t)},!1)},o=0;o<e;o++)t(o);n.globalNavOpener.addEventListener(s,function(){n.openSlideNavMenu()},!1),n.modalShadow.addEventListener(s,function(){n.closeSlideNavMenu()},!1);var l=0;window.addEventListener("resize",function(){l=l||window.setTimeout(function(){l=0,n.closeSlideNavMenu(),n.closeDropDownClipAll()},200)},!1)})}();

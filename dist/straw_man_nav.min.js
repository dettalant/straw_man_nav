!function(){"use strict";function e(e){this.message=e,this.name="NavManagerError"}var l="globalNavContainer",a="globalNav",r="global_nav_clip",i="globalNavOpener",t="is_opened",n="is_visible";e.prototype.toString=function(){return this.name+": "+this.message};function s(){var e=document.getElementById(l);if(null===e)throw new c("#"+l+"の取得ができませんでした");var t=document.getElementById(a);if(null===t)throw new c("#"+a+"の取得ができませんでした");var n=t.getElementsByClassName(r);if(null===n)throw new c("."+r+"の取得ができませんでした");var o=document.getElementById(i);if(null===o)throw new c("#"+i+"の取得ができませんでした");this.globalNav=t,this.globalNavContainer=e,this.globalNavClips=n,this.globalNavOpener=o,this.modalShadow=this.createModalShadowElement(),document.body.appendChild(this.modalShadow)}var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(e);s.prototype.openSlideNavMenu=function(){this.globalNavContainer.classList.add(t),this.modalShadow.classList.add(n)},s.prototype.closeSlideNavMenu=function(){-1!==this.globalNavContainer.className.indexOf(t)&&this.globalNavContainer.classList.remove(t),this.modalShadow.classList.remove(n)},s.prototype.openDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=e.scrollHeight+"px"),e.classList.add(t)},s.prototype.closeDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=""),e.classList.remove(t)},s.prototype.closeDropDownClipAll=function(){for(var e=this.globalNavClips.length,t=0;t<e;t++){var n=this.globalNavClips[t];this.closeDropDownClip(n)}},s.prototype.clickEventHandler=function(e){-1===e.className.indexOf(t)?(this.closeDropDownClipAll(),this.openDropDownClip(e)):this.closeDropDownClip(e)},s.prototype.isOtherElementsClick=function(e,t){if(null===e.target)return console.error("取得したMouseEventにTargetがなかった"),!0;if(!(e.target instanceof Element))return console.error("取得したMouseEventTargetがElementを継承していないやつだった"),!0;if(null===e.target.parentElement)return console.error("取得したMouseEvent Targetに親要素がなかった"),!0;var n,o=e.target.tagName.toUpperCase();if(null===(n="USE"===o?e.target.parentElement.parentElement:"SVG"===o?e.target.parentElement:e.target))return console.error("MouseEventからHTMLElementを取得することができませんでした"),!0;for(var l=n.className,a=t.length,r=0;r<a;r++)if(-1!==l.indexOf(t[r]))return!1;return!0},s.prototype.createModalShadowElement=function(){var e=document.createElement("div");return e.classList.add("modal_shadow"),e},document.addEventListener("DOMContentLoaded",function(){var n=new s;document.addEventListener("click",function(e){var t=[r,"global_nav_clip_wrapper"];n.isOtherElementsClick(e,t)&&n.closeDropDownClipAll()},!1);for(var e=n.globalNavClips.length,t=function(e){var t=n.globalNavClips[e];t.addEventListener("click",function(){n.clickEventHandler(t)},!1)},o=0;o<e;o++)t(o);n.globalNavOpener.addEventListener("click",function(){n.openSlideNavMenu()},!1),n.modalShadow.addEventListener("click",function(){n.closeSlideNavMenu()},!1);var l=0;window.addEventListener("resize",function(){l=l||window.setTimeout(function(){l=0,n.closeSlideNavMenu(),n.closeDropDownClipAll()},200)},!1)})}();

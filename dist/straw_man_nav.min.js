/*!
 *   straw_man_nav.js
 * See {@link https://github.com/dettalant/straw_man_nav}
 *
 * @author dettalant
 * @version v0.4.1
 * @license MIT License
 */
var strawManNav=function(){"use strict";function e(e){this.message=e,this.name="NavManagerError"}e.prototype.toString=function(){return this.name+": "+this.message};function t(e){this.states={scrollY:0},this.args=e||{navContainerId:"globalNavContainer",navId:"globalNav",navClipClassName:"global_nav_clip",navClipWrapperClassName:"global_nav_clip_wrapper",navCloseElClassName:"is_close_global_nav",navClipUncloseElClassName:"is_unclose_global_nav_clip",navOpenerId:"globalNavOpener",stateOpened:"is_opened",stateVisible:"is_visible"},this.globalNavCloseElements=document.getElementsByClassName(this.args.navCloseElClassName);var t=document.getElementById(this.args.navContainerId);if(null===t)throw new l("#"+this.args.navContainerId+"の取得ができませんでした");var a=document.getElementById(this.args.navId);if(null===a)throw new l("#"+this.args.navId+"の取得ができませんでした");var s=a.getElementsByClassName(this.args.navClipClassName);if(null===s)throw new l("."+this.args.navClipClassName+"の取得ができませんでした");var n=document.getElementById(this.args.navOpenerId);if(null===n)throw new l("#"+this.args.navOpenerId+"の取得ができませんでした");this.globalNav=a,this.globalNavContainer=t,this.globalNavClips=s,this.globalNavOpener=n,this.modalShadow=this.createModalShadowElement(),document.body.appendChild(this.modalShadow)}var l=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(e);return t.prototype.openSlideNavMenu=function(){this.pinBodyScroll(),this.globalNavContainer.classList.add(this.args.stateOpened),this.modalShadow.classList.add(this.args.stateVisible)},t.prototype.closeSlideNavMenu=function(){this.unpinBodyScroll(),-1!==this.globalNavContainer.className.indexOf(this.args.stateOpened)&&this.globalNavContainer.classList.remove(this.args.stateOpened),this.modalShadow.classList.remove(this.args.stateVisible)},t.prototype.pinBodyScroll=function(){this.states.scrollY=window.scrollY,document.body.style.position="fixed",document.body.style.top="-"+this.states.scrollY+"px"},t.prototype.unpinBodyScroll=function(){document.body.style.position="",document.body.style.top="",0!==this.states.scrollY&&window.scrollTo(0,this.states.scrollY)},t.prototype.openDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=function(e){for(var t=0,a=e.children.length,s=0;s<a;s++){var n=e.children[s];if(n instanceof HTMLElement){var l=n.scrollHeight,o=n.offsetHeight;t+=o<l?l:o}}return t}(e)+"px"),e.classList.add(this.args.stateOpened)},t.prototype.closeDropDownClip=function(e){e instanceof HTMLElement&&(e.style.maxHeight=""),e.classList.remove(this.args.stateOpened)},t.prototype.closeDropDownClipAll=function(){for(var e=this.globalNavClips.length,t=0;t<e;t++){var a=this.globalNavClips[t];this.closeDropDownClip(a)}},t.prototype.clickEventHandler=function(e){-1===e.className.indexOf(this.args.stateOpened)?(this.closeDropDownClipAll(),this.openDropDownClip(e)):this.closeDropDownClip(e)},t.prototype.isOtherElementsClick=function(e,t){if(null===e.target)return!0;if(!(e.target instanceof Element))return!0;for(var n=function(e,t){var a=e.tagName.toUpperCase(),s=t.toUpperCase();return a===s?e:a!==s&&null!==e.parentElement?n(e.parentElement,s):e},a=n(e.target,"div").className,s=t.length,l=0;l<s;l++)if(-1!==a.indexOf(t[l]))return!1;return!0},t.prototype.isCloseElementClick=function(e){var t=!1;return e.target instanceof HTMLElement&&-1!==e.target.className.indexOf(this.args.navCloseElClassName)&&(t=!0),t},t.prototype.createModalShadowElement=function(){var e=document.createElement("div");return e.classList.add("modal_shadow"),e},t.prototype.registerNavEvents=function(){var a=this;document.addEventListener("click",function(e){var t=[a.args.navClipClassName,a.args.navClipWrapperClassName];a.isOtherElementsClick(e,t)&&a.closeDropDownClipAll()},!1);for(var e=this.globalNavClips.length,t=function(e){var t=a.globalNavClips[e];t.addEventListener("click",function(e){e.target instanceof HTMLElement&&-1!==e.target.className.indexOf(a.args.navClipUncloseElClassName)||a.clickEventHandler(t)},!1)},s=0;s<e;s++)t(s);this.globalNavOpener.addEventListener("click",function(){return a.openSlideNavMenu()});function n(){return a.closeSlideNavMenu()}this.modalShadow.addEventListener("click",n);for(var l=this.globalNavCloseElements.length,o=0;o<l;o++){this.globalNavCloseElements[o].addEventListener("click",n)}},t}();
